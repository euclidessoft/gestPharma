{% extends
    is_granted('ROLE_ADMIN') ? 'admin.html.twig' :
    is_granted('ROLE_RH') ? 'rh.html.twig' :
    is_granted('ROLE_FINANCE') ? 'finance.html.twig' :
    is_granted('ROLE_STOCK') ? 'stock.html.twig' :
    is_granted('ROLE_LIVREUR') ? 'livreur.html.twig' :
    is_granted('ROLE_EMPLOYER') ? 'employe.html.twig' :
    'layout.html.twig' %}
{% block title %} {{ "Modifier santion"|trans }} - GNT Pharma {% endblock %}
{% block administration %}active{% endblock %}
{% block sanctions %}active{% endblock %}

{% block body %}

    <div class="col-lg-4 offset-lg-4 my-4 fond-7 p-5 pt-4">
        <h4 class="mb-5">
            <i class="fa fa-user-xmark"></i><i class="fa fa-plus"></i>
            {{ 'Modification Sanction'|trans }}
        </h4>

        {% for message in app.flashes('notice') %}
            <div role="alert" class="alert alert-success alert-dismissible fade show radius-10 shadow-black">
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                {{ message|trans }}
            </div>
        {% endfor %}

        {{ include('sanction/admin/_form.html.twig') }}
    </div>
    <div class="col-lg-4 offset-lg-4 my-4 p-3 fond-7">
        <div class="centrer gap-3">
            <button type="button" class="btn btn-shadow btn-green btn-normal" id="send" onclick="envoie()">
                <i class="fa fa-save"></i>
                {{ 'Enregistrer'|trans }}
            </button>

            <a href="{{ path('sanction_index') }}" class="btn btn-shadow btn-success-light btn-normal">
                <i class="fa fa-undo"></i>
                {{ 'Retour'|trans }}
            </a>
        </div>
        {{ form_end(form) }}
    </div>
    {% block scripts %}
        <script>
            $(document).ready(function () {
                const $dateFields = $('#dateDebut, #dateFin').hide();
                $('#sanction_typeSanction').on('change', function () {
                    const isMiseAPied = $(this).find('option:selected').text().trim() === "Mis à pied";
                    $dateFields.toggle(isMiseAPied);
                }).trigger('change'); // Déclenche immédiatement pour gérer l'état initial
                $('form').on('reset', function () {
                    $dateFields.val('').hide();
                });
            });
        </script>
    {% endblock %}
{% endblock %}
