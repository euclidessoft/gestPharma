{% extends 'layout.html.twig' %}

{% block title %}{{ 'Journal comptable'|trans }} - PharmaCare{% endblock %}

{% block finance %}active{% endblock %}

{% block journal %}active{% endblock %}
{% block repartition %}active{% endblock %}

{% block body %}

    <div class="col-lg-11 mt-5 mb-5 fond">
        <h3 class="mt-4 text-bold">
            <i class="fas fa-money-bill fa-lg"></i><i class="fas fa-hourglass-half"></i>
            {{ 'Journal Repartition Resultat'|trans }}
        </h3>
        {% for message in app.session.flashbag.get('notice') %}
            <div role="alert" class="alert alert-danger alert-dismissible fade show radius-10 shadow-black mt-5 mb-5">
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="true">&times;</button>
                {{ message|trans }}
            </div>
        {% endfor %}
       

        <div class="card border-green shadow-black mt-5 mb-3 fond-5">
            <div class="card-header bg-success-light bb-success">
                <h5 class="text-success text-bold">
                    <i class="fa fa-money-bill-transfer"></i>
                    {{ 'Journal Repartition Resultat'|trans }}
                </h5>
            </div>
            <div class="card-body">
                <table class="table table-success-light table-bordered table-hover table-striped">
                    <thead>
                    <tr>
                        <th class="text-center"> {{ 'Nº'|trans }}</th>
                        <th class="text-center"> {{ 'Date'|trans }}</th>
                        <th>{{ 'Compte'|trans }}</th>
{#                        <th>{{ 'Référence'|trans }}</th>#}
                        <th>{{ 'Libellé'|trans }}</th>
                        <th class="text-center">{{ 'Débit'|trans }}</th>
                        <th class="text-center">{{ 'Crédit'|trans }}</th>
                        {#                        <th class="text-center">{{ 'Solde'|trans }}</th> #}
                    </tr>
                    </thead>
                    <tbody>
                    {% set i = 1 %}
                    {% for ecriture in ecritures %}
                                <tr>
                                    <td data-label="{{ 'Date'|trans }}" class="text-center">
                                      {{ i }} {% set i = i + 1 %} 
                                    </td>
                                    <td data-label="{{ 'Date'|trans }}" class="text-center">
                                      
                                            {{ ecriture.date|date('d/m/Y') }}
                                            
                                    </td>
                                    <td data-label="{{ 'Débit'|trans }}">
                                        <a href="{{ path('finance_journal_compte',{ 'compte': ecriture.comptecredit  }) }}">
                                            {#                                    {{ ecriture.debit ? ecriture.comptedebit : '' }}#}
                                            {{ ecriture.comptecredit ~" - "~ ecriture.libellecomptecredit }}
                                        </a>
                                    </td>
                                    {#                                    <td data-label="{{ 'Référence'|trans }}">#}

                                    {#                                    </td>#}
                                    <td data-label="{{ 'Libellé'|trans }}">
                                        {#                                        {{ ecriture.debit ? ecriture.libelle : '' }}#}
                                                                                {{  ecriture.libelle }}

                                    </td>
                                    <td data-label="{{ 'Crédit'|trans }}" class="text-end">
                                        {#                                    {{ ecriture.debit ? ecriture.montant|number_format(2, app.request.locale == 'fr' ? ',' : '.', app.request.locale == 'fr' ? ' ' : ',') : '' }}#}
                                        {{ ecriture.montant|number_format(2, app.request.locale == 'fr' ? ',' : '.', app.request.locale == 'fr' ? ' ' : ',') }}
                                    </td>
                                    <td data-label="{{ 'Débit'|trans }}" class="text-end">
                                        {#                                    {{ ecriture.debit ? ecriture.montant|number_format(2, app.request.locale == 'fr' ? ',' : '.', app.request.locale == 'fr' ? ' ' : ',') : '' }}#}
                                        {#                                    {{ ecriture.credit ? ecriture.montant|number_format(2, app.request.locale == 'fr' ? ',' : '.', app.request.locale == 'fr' ? ' ' : ',') : '' }}#}

                                    </td>
                                    {#                                <td data-label="{{ 'solde'|trans }}"  class="te
                                    {#                                <td data-label="{{ 'solde'|trans }}"  class="tefirstxt-center">#}


                                    {#                                {% set montant2 = montant2 + debit.depense.montant %}#}
                                </tr>
                                <tr>
                                    <td data-label="{{ 'Date'|trans }}" class="text-center">
                                        
                                    </td>
                                    <td data-label="{{ 'Date'|trans }}" class="text-center">
                                        
                                    </td>
                                    <td data-label="{{ 'Compte'|trans }}" class="credit">
                                        <a href="{{ path('finance_journal_compte',{ 'compte': ecriture.comptedebit  }) }}">
                                        {#                                    {{ ecriture.debit ? ecriture.comptecredit : '' }}#}
                                        {{ ecriture.comptedebit~" - "~ ecriture.libellecomptedebit  }}
                                        </a>
                                    </td>
{#                                    <td data-label="{{ 'Référence'|trans }}">#}

{#                                    </td>#}
                                    <td data-label="{{ 'Libellé'|trans }}">
                                        {#                                    {{ ecriture.debit ? ecriture.libelle : '' }}#}
                                        {{  ecriture.libelle  }}

                                    </td>
                                    <td data-label="{{ 'Crédit'|trans }}" class="text-end">
                                        {#                                                                        {{ ecriture.debit ? ecriture.montant|number_format(2, app.request.locale == 'fr' ? ',' : '.', app.request.locale == 'fr' ? ' ' : ',') : '' }}#}
                                        {#                                    {{ ecriture.credit ? ecriture.montant|number_format(2, app.request.locale == 'fr' ? ',' : '.', app.request.locale == 'fr' ? ' ' : ',') : '' }}#}
                                    </td>
                                    <td data-label="{{ 'Débit'|trans }}" class="text-end">
                                        {#                                    {{ ecriture.debit ? ecriture.montant|number_format(2, app.request.locale == 'fr' ? ',' : '.', app.request.locale == 'fr' ? ' ' : ',') : '' }}#}
                                        {{ ecriture.montant|number_format(2, app.request.locale == 'fr' ? ',' : '.', app.request.locale == 'fr' ? ' ' : ',')  }}

                                    </td>
                                    {#                                <td data-label="{{ 'solde'|trans }}"  class="text-center">#}


                                    {#                                {% set montant2 = montant2 + debit.depense.montant %}#}
                                </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
            {#<div class="card-footer bg-success-light bt-success">
                <h4 class="text-success text-bold">
                    {{ 'Total transfert'|trans }} :
                    <span class="text-nowrap">
                    {{ montant2|number_format(2, app.request.locale == 'fr' ? ',' : '.', app.request.locale == 'fr' ? ' ' : ',') }} F CFA
                </span>
                </h4>
            </div>#}
        </div>
    </div>

{% endblock %}
